!function(){"use strict";const e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),s={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},i=document.querySelector(".popup__form_type_profile"),r=document.querySelector(".popup__form_type_add-place"),n=document.querySelector(".profile__image-container"),o=document.querySelector(".popup__form_type_avatar");function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{constructor(e){a(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),a(this,"_handleOverlayClose",(e=>{e.target.classList.contains("popup")&&this.close()})),this._popupElement=document.querySelector(e),this.close=this.close.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose(e){e.target.classList.contains("popup")&&this.close()}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",this.close)}}class c extends l{constructor(e,t){var s,i;super(e),i=()=>{super.close(),this._formElement.reset()},(s="close")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._formElement=this._popupElement.querySelector(".popup__form"),this._submitHandler=t,this._inputList=[...this._formElement.querySelectorAll(".form__input")],this._submitButton=this._formElement.querySelector(".form__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(this._getInputValues())})),super.setEventListeners()}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}}class h{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInputs(){return this._inputList.some((e=>!e.validity.valid))}_disableButton(){this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)}enableButton(){this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass)}_toggleButton(){this._hasInvalidInputs()?this._disableButton():this.enableButton()}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._button=this._form.querySelector(this._submitButtonSelector),this._toggleButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}resetFormButton(){this._disableButton()}hideErrors(){this._inputList.forEach((e=>{this._hideInputError(e)}))}}class _{constructor(e,t,s,i){let{handleCardClick:r,handleDeleteCard:n,handleLikeCard:o}=s;this._text=e.name,this._link=e.link,this._selector=t,this._handleCardClick=r,this._handleDeleteCard=n,this._handelLikeCard=o,this._id=e._id,this._userId=i,this._ownerId=e.owner._id,this._likes=e.likes}_getCloneFromTemplate(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._element.addEventListener("click",(e=>{e.target===this._likeButton&&this._handelLikeCard(this._id),e.target===this._deleteButton&&this._handleDeleteCard(this._id),e.target===this._image&&this._handleCardClick(e)}))}removeCard(){this._element.remove(),this._element=null}likeCard(e){this._likeButton.classList.add("card__like-button_active"),this._likes=e,this._likeCount.textContent=this._likes.length}dislikeCard(e){this._likeButton.classList.remove("card__like-button_active"),this._likes=e,this._likeCount.textContent=this._likes.length}isLiked(){return this._likes.some((e=>e._id===this._userId))}generateCard(){return this._element=this._getCloneFromTemplate(),this._image=this._element.querySelector(".card__image"),this._likeButton=this._element.querySelector(".card__like-button"),this._element.querySelector(".card__title").textContent=this._text,this._image.src=this._link,this._image.alt="A beautiful scene in ".concat(this._text),this._deleteButton=this._element.querySelector(".card__delete-button"),this._ownerId!==this._userId&&(this._deleteButton.style.display="none"),this._likeCount=this._element.querySelector(".card__like-count"),this._likeCount.textContent=this._likes.length,this.isLiked()&&this.likeCard(this._likes),this._setEventListeners(),this._element}}const d=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}setUserInfo(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}setUserAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this._checkResponse)}createCard(e){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}likeCard(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then(this._checkResponse)}dislikeCard(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"2aae8d26-8315-4517-953d-28905b81f143","Content-Type":"application/json"}}),u=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:m},".cards__list");let p;function m(e){const t=function(e){const t=new _(e,"#card-template",{handleCardClick:()=>{g.open(e.link,e.name)},handleDeleteCard:e=>{y.open(),y.setAction((()=>{d.deleteCard(e).then((e=>{console.log("card is deleted",e),t.removeCard()})).then((()=>{console.log("server deleted card"),y.close()})).catch((e=>console.log(e)))}))},handleLikeCard:e=>{t.isLiked()?d.dislikeCard(e).then((e=>{t.dislikeCard(e.likes),console.log("card is disliked",e)})).catch((e=>console.log(e))):d.likeCard(e).then((e=>{t.likeCard(e.likes),console.log("card is liked",e)})).catch((e=>console.log(e)))}},p);return t.generateCard()}(e);u.addItem(t)}Promise.all([d.getInitialCards(),d.getUserInfo()]).then((e=>{let[t,s]=e;p=s._id,u.renderItems(t),f.setUserInfo(s.name,s.about),f.setUserAvatar(s.avatar)})).then((()=>f.setAvatarVisible())).catch((e=>console.log(e)));const v=new h(s,i),b=new h(s,r),C=new h(s,o);v.enableValidation(),b.enableValidation(),C.enableValidation();const f=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._avatar=document.querySelector(i),console.log(this._avatar)}getUserInfo(){return{name:this._profileName.textContent,title:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setUserAvatar(e){this._avatar.src=e}setAvatarVisible(){this._avatar.style.visibility="visible"}}({nameSelector:".profile__name",jobSelector:".profile__title",avatarSelector:".profile__image"}),k=new c(".popup_type_edit-profile",(e=>{k.renderLoading(!0,"Saving..."),d.setUserInfo(e.name,e.title).then((e=>{f.setUserInfo(e.name,e.about),k.close()})).catch((e=>console.log(e))).finally((()=>k.renderLoading(!1)))}));k.setEventListeners();const E=new c(".popup_type_add-place",(e=>{E.renderLoading(!0,"Creating..."),d.createCard(e).then((e=>{m(e),E.close()})).catch((e=>console.log(e))).finally((()=>E.renderLoading(!1)))}));E.setEventListeners();const g=new class extends l{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".popup__image"),this._popupCaption=this._popupElement.querySelector(".popup__caption")}open(e,t){this._popupImage.src=e,this._popupImage.alt="A beautiful view of ".concat(t),this._popupCaption.textContent=t,super.open()}}(".popup_type_image-prev");g.setEventListeners();const y=new class extends l{setAction(e){this._submitHandler=e}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler()})),super.setEventListeners()}}(".popup_type_delete-card");y.setEventListeners();const L=new c(".popup_type_avatar",(e=>{L.renderLoading(!0,"Saving avatar..."),d.setUserAvatar(e.link).then((e=>{f.setUserAvatar(e.avatar),L.close()})).catch((e=>console.log(e))).finally((()=>L.renderLoading(!1)))}));L.setEventListeners(),e.addEventListener("click",(()=>{const e=f.getUserInfo();k.setInputValues(e),v.hideErrors(),v.enableButton(),k.open()})),t.addEventListener("click",(()=>{b.resetFormButton(),E.open(),b.hideErrors()})),n.addEventListener("click",(()=>{C.resetFormButton(),L.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUE4QjFKLEVBQ25DMkosVUFBVTZCLEdBQ1JuTCxLQUFLb0IsZUFBaUIrSixFQUd4QnJLLG9CQUNFZCxLQUFLSyxjQUFjSSxpQkFBaUIsVUFBV3lCLElBQzdDQSxFQUFFQyxpQkFDRm5DLEtBQUtvQixvQkFFUEgsTUFBTUgsc0JKOEo4QiwyQkFDeEN1SSxFQUFZdkksb0JBRVosTUFBTXNLLEVBQWMsSUFBSXJLLEVBQWMsc0JBQXVCa0IsSUFDM0RtSixFQUFZaEosZUFBYyxFQUFNLG9CQUNoQ3VFLEVBQUFBLGNBQ2lCMUUsRUFBSzJDLE1BQ25CNkMsTUFBTVIsSUFDTDZDLEVBQVM3QixjQUFjaEIsRUFBSXhILFFBQzNCMkwsRUFBWW5MLFdBRWJ3SixPQUFPQyxHQUFRSCxRQUFRQyxJQUFJRSxLQUMzQm1CLFNBQVEsSUFBTU8sRUFBWWhKLGVBQWMsUUFFN0NnSixFQUFZdEssb0JBS1pqQyxFQUFrQjRCLGlCQUFpQixTQUFTLEtBQzFDLE1BQU00SyxFQUFPdkIsRUFBU3BDLGNBQ3RCa0QsRUFBVTVJLGVBQWVxSixHQUN6QnJCLEVBQXFCN0YsYUFDckI2RixFQUFxQmxHLGVBQ3JCOEcsRUFBVXJLLFVBR1p2QixFQUFleUIsaUJBQWlCLFNBQVMsS0FDdkN3SixFQUFpQi9GLGtCQUNqQjRHLEVBQWF2SyxPQUNiMEosRUFBaUI5RixnQkFHbkIxRSxFQUFPZ0IsaUJBQWlCLFNBQVMsS0FDL0J5SixFQUFvQmhHLGtCQUNwQmtILEVBQVk3SyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8veS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3kvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3kvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3kvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3kvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8veS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly95Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3kvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHZhbGlkYXRpb25Db25maWd1cmF0aW9ucyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX3Byb2ZpbGVcIik7XG5cbmNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9hZGQtcGxhY2VcIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1jb250YWluZXJcIik7XG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2F2YXRhclwiKTtcblxuZXhwb3J0IHtcbiAgYXZhdGFyLFxuICBhdmF0YXJGb3JtLFxuICBlZGl0UHJvZmlsZUJ1dHRvbixcbiAgYWRkUGxhY2VCdXR0b24sXG4gIHZhbGlkYXRpb25Db25maWd1cmF0aW9ucyxcbiAgcHJvZmlsZUZvcm0sXG4gIHBsYWNlRm9ybSxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG59O1xuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfaGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvL2NvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyB0aGF0IGRhdGEgYXMgYW4gb2JqZWN0LlxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL0l0IG1vZGlmaWVzIHRoZSBzZXRFdmVudExpc3RlbmVycygpIHBhcmVudCBtZXRob2QuIFRoZSBzZXRFdmVudExpc3RlbmVycygpIG1ldGhvZCBvZiB0aGVcbiAgICAvL1BvcHVwV2l0aEZvcm0gY2xhc3MgaGFzIHRvIGFkZCB0aGUgc3VibWl0IGV2ZW50IGhhbmRsZXIgdG8gdGhlIGZvcm0gYW5kIHRoZVxuICAgIC8vY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGNsb3NlIGljb24uXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIC8vSXQgbW9kaWZpZXMgdGhlIGNsb3NlKCkgcGFyZW50IG1ldGhvZCBpbiBvcmRlciB0byByZXNldCB0aGUgZm9ybSBvbmNlIHRoZSBwb3B1cCBpcyBjbG9zZWQuXG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9O1xuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbnMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWd1cmF0aW9ucy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlndXJhdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZ3VyYXRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlndXJhdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWd1cmF0aW9ucy5lcnJvckNsYXNzO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIGVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dHMoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldEZvcm1CdXR0b24oKSB7XG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgaGlkZUVycm9ycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgc2VsZWN0b3IsXG4gICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmQsIGhhbmRsZUxpa2VDYXJkIH0sXG4gICAgdXNlcklkXG4gICkge1xuICAgIHRoaXMuX3RleHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9oYW5kZWxMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gIH1cblxuICBfZ2V0Q2xvbmVGcm9tVGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9saWtlQnV0dG9uKSB7XG4gICAgICAgIHRoaXMuX2hhbmRlbExpa2VDYXJkKHRoaXMuX2lkKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9kZWxldGVCdXR0b24pIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9pZCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5faW1hZ2UpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBsaWtlQ2FyZChuZXdMaWtlcykge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAvLyB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSBuZXdMaWtlc0NvdW50O1xuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXM7XG4gICAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQobmV3TGlrZXMpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgLy8gdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gbmV3TGlrZXNDb3VudDtcbiAgICB0aGlzLl9saWtlcyA9IG5ld0xpa2VzO1xuICAgIHRoaXMuX2xpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRDbG9uZUZyb21UZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYEEgYmVhdXRpZnVsIHNjZW5lIGluICR7dGhpcy5fdGV4dH1gO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQgJiZcbiAgICAgICh0aGlzLl9kZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKTtcblxuICAgIHRoaXMuX2xpa2VDb3VudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50XCIpO1xuICAgIHRoaXMuX2xpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIHRoaXMuaXNMaWtlZCgpICYmIHRoaXMubGlrZUNhcmQodGhpcy5fbGlrZXMpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcih1cmwpIHtcbiAgICAvLyBTZW5kIHRoZSBmb2xsb3dpbmcgUEFUQ0ggcmVxdWVzdCB0byBjaGFuZ2UgdGhlIHByb2ZpbGUgcGljdHVyZTpcbiAgICAvLyBQQVRDSCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvdXNlcnMvbWUvYXZhdGFyXG4gICAgLy8gSW4gdGhlIHJlcXVlc3QgYm9keSwgcGFzcyB0aGUgSlNPTiB3aXRoIGEgc2luZ2xlIHByb3BlcnR5LCBhdmF0YXIuIFRoaXMgcHJvcGVydHkgc2hvdWxkIGNvbnRhaW4gYSBsaW5rIHRvIHRoZSBuZXcgcHJvZmlsZSBwaWN0dXJlLiBJbiB0aGUgY2FzZSB0aGF0IGFueXRoaW5nIG90aGVyIHRoYW4gYSBsaW5rIGlzIHNlbnQsIHRoZSBzZXJ2ZXIgd2lsbCByZXR1cm4gYW4gZXJyb3IuXG4gICAgLy8gV2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGVpciBwcm9maWxlIHBpY3R1cmUsIHRoZSBlZGl0IGljb24gc2hvdWxkIGFwcGVhciBvbiBpdDpcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IHVybCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjJhYWU4ZDI2LTgzMTUtNDUxNy05NTNkLTI4OTA1YjgxZjE0M1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG4iLCIvLy8vLyBJbXBvcnRpbmcgc3R5bGVzIGZvciB3ZWJwYWNrIHRvIGNvbm5lY3RcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vLy9JbXBvcnRzXG5pbXBvcnQge1xuICBlZGl0UHJvZmlsZUJ1dHRvbixcbiAgYWRkUGxhY2VCdXR0b24sXG4gIHZhbGlkYXRpb25Db25maWd1cmF0aW9ucyxcbiAgcHJvZmlsZUZvcm0sXG4gIHBsYWNlRm9ybSxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGF2YXRhcixcbiAgYXZhdGFyRm9ybSxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xuXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaVwiO1xuaW1wb3J0IHsgUG9wdXBXaXRoU3VibWl0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0XCI7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qICAgSW5pdGlhbCBDYXJkIENyZWF0aW9uICAgKi9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuY29uc3QgcGxhY2VzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmxldCB1c2VySWQ7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcbiAgLnRoZW4oKFtjYXJkcywgdXNlckRhdGFdKSA9PiB7XG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xuICAgIHBsYWNlc1NlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gIH0pXG4gIC50aGVuKCgpID0+IHVzZXJJbmZvLnNldEF2YXRhclZpc2libGUoKSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgZGF0YSxcbiAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgaW1hZ2VQb3B1cC5vcGVuKGRhdGEubGluaywgZGF0YS5uYW1lKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGVDYXJkOiAoaWQpID0+IHtcbiAgICAgICAgZGVsZXRlUG9wdXAub3BlbigpO1xuXG4gICAgICAgIGRlbGV0ZVBvcHVwLnNldEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgLy8gc3VibWl0IG1vZGFsXG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChpZClcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYXJkIGlzIGRlbGV0ZWRcIiwgcmVzKTtcbiAgICAgICAgICAgICAgLy9yZW1vdmUgaXQgZnJvbSBET01cbiAgICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNlcnZlciBkZWxldGVkIGNhcmRcIik7XG4gICAgICAgICAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlQ2FyZDogKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzTGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcblxuICAgICAgICBpZiAoaXNMaWtlZCkge1xuICAgICAgICAgIC8vZGlzbGlrZSBjYXJkXG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGlzbGlrZUNhcmQoaWQpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuZGlzbGlrZUNhcmQocmVzLmxpa2VzKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYXJkIGlzIGRpc2xpa2VkXCIsIHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vbGlrZSBjYXJkXG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAubGlrZUNhcmQoaWQpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQubGlrZUNhcmQocmVzLmxpa2VzKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYXJkIGlzIGxpa2VkXCIsIHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0sXG4gICAgLy9jb21wYXJpbmcgdXNlcklkIHRvIGNhcmRJZFxuICAgIHVzZXJJZFxuICApO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBnZW5lcmF0ZUNhcmQoZGF0YSk7XG4gIHBsYWNlc1NlY3Rpb24uYWRkSXRlbShlbGVtZW50KTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKiAgICAgRm9ybSBWYWxpZGF0aW9uIEluc3RhbnRpYXRpb24gICAgKi9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlndXJhdGlvbnMsXG4gIHByb2ZpbGVGb3JtXG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWd1cmF0aW9ucywgcGxhY2VGb3JtKTtcblxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlndXJhdGlvbnMsXG4gIGF2YXRhckZvcm1cbik7XG5cbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcbn0pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyogICAgIFBvcHVwIEluc3RhbnRpYXRpb24gICAgKi9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCIsIChkYXRhKSA9PiB7XG4gIGVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xuICBhcGlcbiAgICAuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLnRpdGxlKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xuICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBlZGl0UG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xufSk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9hZGQtcGxhY2VcIiwgKGRhdGEpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJDcmVhdGluZy4uLlwiKTtcbiAgYXBpXG4gICAgLmNyZWF0ZUNhcmQoZGF0YSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKHJlcyk7XG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKSk7XG59KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2UtcHJldlwiKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIsIChkYXRhKSA9PiB7XG4gIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJTYXZpbmcgYXZhdGFyLi4uXCIpO1xuICBhcGlcbiAgICAuc2V0VXNlckF2YXRhcihkYXRhLmxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcbiAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBhdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKSk7XG59KTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gRXZlbnQgTGlzdGVuZXJzXG4vLy8vLy8vLy8vLy8vLy8vLy9cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBlZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXMoaW5mbyk7XG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcnMoKTtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlQnV0dG9uKCk7XG4gIGVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldEZvcm1CdXR0b24oKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbiAgYWRkRm9ybVZhbGlkYXRvci5oaWRlRXJyb3JzKCk7XG59KTtcblxuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRGb3JtQnV0dG9uKCk7XG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgLy8gdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9hdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgdGl0bGU6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCA9IGpvYjtcbiAgfVxuXG4gIC8vc2V0IHVwIHdpdGggYXZhdGFyRWxlbWVudCBwYXJhbWV0ZXIgc28gdGhhdCBpbWFnZSBjYW4gYmUgYWRkZWQgdG8gRE9NIG9ubHkgYWZ0ZXIgc3VjY2Vzc2Z1bGx5IGZldGNoZWQgZnJvbSBzZXJ2ZXJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG5cbiAgc2V0QXZhdGFyVmlzaWJsZSgpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKGltYWdlLCBjYXB0aW9uKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBBIGJlYXV0aWZ1bCB2aWV3IG9mICR7Y2FwdGlvbn1gO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcHRpb247XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gIHNldEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZWRpdFByb2ZpbGVCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRQbGFjZUJ1dHRvbiIsInZhbGlkYXRpb25Db25maWd1cmF0aW9ucyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUZvcm0iLCJwbGFjZUZvcm0iLCJhdmF0YXIiLCJhdmF0YXJGb3JtIiwiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJ0aGlzIiwiY2xvc2UiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9wb3B1cEVsZW1lbnQiLCJiaW5kIiwib3BlbiIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJzdXBlciIsIl9mb3JtRWxlbWVudCIsInJlc2V0IiwiX3N1Ym1pdEhhbmRsZXIiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsInRleHRDb250ZW50IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlndXJhdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXRzIiwic29tZSIsIl9kaXNhYmxlQnV0dG9uIiwiX2J1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvbiIsIl9zZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldEZvcm1CdXR0b24iLCJoaWRlRXJyb3JzIiwiQ2FyZCIsInNlbGVjdG9yIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VDYXJkIiwiX3RleHQiLCJfbGluayIsImxpbmsiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGVsTGlrZUNhcmQiLCJfaWQiLCJfdXNlcklkIiwiX293bmVySWQiLCJvd25lciIsIl9saWtlcyIsImxpa2VzIiwiX2dldENsb25lRnJvbVRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiX2ltYWdlIiwicmVtb3ZlQ2FyZCIsImxpa2VDYXJkIiwibmV3TGlrZXMiLCJfbGlrZUNvdW50IiwibGVuZ3RoIiwiZGlzbGlrZUNhcmQiLCJpc0xpa2VkIiwibGlrZSIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsInN0eWxlIiwiZGlzcGxheSIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0VXNlckF2YXRhciIsInVybCIsImNyZWF0ZUNhcmQiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsInBsYWNlc1NlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJyZW5kZXJDYXJkIiwiZWxlbWVudCIsImNhcmQiLCJpbWFnZVBvcHVwIiwiZGVsZXRlUG9wdXAiLCJzZXRBY3Rpb24iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiLCJhbGwiLCJjYXJkcyIsInVzZXJEYXRhIiwidXNlckluZm8iLCJzZXRBdmF0YXJWaXNpYmxlIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9hdmF0YXIiLCJ0aXRsZSIsImpvYiIsInZpc2liaWxpdHkiLCJlZGl0UG9wdXAiLCJmaW5hbGx5IiwiYWRkQ2FyZFBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiaW1hZ2UiLCJjYXB0aW9uIiwiYWN0aW9uIiwiYXZhdGFyUG9wdXAiLCJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==